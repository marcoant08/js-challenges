<!DOCTYPE html>
<html lang="en">
  <head>
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link href="https://fonts.googleapis.com/css2?family=Fira+Code&family=Poppins:wght@200;400&display=swap" rel="stylesheet" />
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../resultadoMegaSena/styles.css" />
    <title>Document</title>
  </head>

  <body>
    <main class="center">
      <h1>Mega Sena dos Cucks</h1>

      <div class="input">
        <input maxlength="2" id="bola1" type="text" oninput="processar()" />
        <input maxlength="2" id="bola2" type="text" oninput="processar()" />
        <input maxlength="2" id="bola3" type="text" oninput="processar()" />
        <input maxlength="2" id="bola4" type="text" oninput="processar()" />
        <input maxlength="2" id="bola5" type="text" oninput="processar()" />
        <input maxlength="2" id="bola6" type="text" oninput="processar()" />
      </div>

      <div class="grid">
        <div class="jogador">
          <p>gabriel:</p>
          <ul>
            <li>
              <span class="03">03</span><span class="17">17</span><span class="22">22</span><span class="37">37</span
              ><span class="39">39</span><span class="45">45</span>
            </li>
            <li>
              <span class="03">03</span><span class="05">05</span><span class="15">15</span><span class="29">29</span
              ><span class="35">35</span><span class="58">58</span>
            </li>
            <li>
              <span class="14">14</span><span class="26">26</span><span class="31">31</span><span class="43">43</span
              ><span class="48">48</span><span class="59">59</span>
            </li>
            <li>
              <span class="08">08</span><span class="19">19</span><span class="27">27</span><span class="36">36</span
              ><span class="44">44</span><span class="53">53</span>
            </li>
          </ul>
        </div>

        <div class="jogador">
          <p>thal:</p>
          <ul>
            <li>
              <span class="21">21</span><span class="19">19</span><span class="59">59</span><span class="43">43</span
              ><span class="26">26</span><span class="04">04</span>
            </li>
            <li>
              <span class="50">50</span><span class="38">38</span><span class="44">44</span><span class="45">45</span
              ><span class="28">28</span><span class="17">17</span>
            </li>
            <li>
              <span class="18">18</span><span class="46">46</span><span class="14">14</span><span class="07">07</span
              ><span class="04">04</span><span class="37">37</span>
            </li>
            <li>
              <span class="09">09</span><span class="59">59</span><span class="51">51</span><span class="53">53</span
              ><span class="22">22</span><span class="52">52</span>
            </li>
          </ul>
        </div>

        <div class="jogador">
          <p>murilo:</p>
          <ul>
            <li>
              <span class="08">08</span><span class="13">13</span><span class="17">17</span><span class="22">22</span
              ><span class="47">47</span><span class="51">51</span>
            </li>
            <li>
              <span class="05">05</span><span class="16">16</span><span class="24">24</span><span class="32">32</span
              ><span class="33">33</span><span class="45">45</span>
            </li>
            <li>
              <span class="03">03</span><span class="23">23</span><span class="37">37</span><span class="43">43</span
              ><span class="55">55</span><span class="60">60</span>
            </li>
            <li>
              <span class="01">01</span><span class="07">07</span><span class="26">26</span><span class="41">41</span
              ><span class="49">49</span><span class="56">56</span>
            </li>
          </ul>
        </div>

        <div class="jogador">
          <p>JoãoVictor:</p>
          <ul>
            <li>
              <span class="04">04</span><span class="18">18</span><span class="23">23</span><span class="38">38</span
              ><span class="40">40</span><span class="46">46</span>
            </li>
            <li>
              <span class="04">04</span><span class="06">06</span><span class="16">16</span><span class="30">30</span
              ><span class="36">36</span><span class="59">59</span>
            </li>
            <li>
              <span class="08">08</span><span class="09">09</span><span class="11">11</span><span class="24">24</span
              ><span class="25">25</span><span class="31">31</span>
            </li>
            <li>
              <span class="01">01</span><span class="10">10</span><span class="25">25</span><span class="35">35</span
              ><span class="53">53</span><span class="58">58</span>
            </li>
          </ul>
        </div>

        <div class="jogador">
          <p>tontoin:</p>
          <ul>
            <li>
              <span class="16">16</span><span class="36">36</span><span class="45">45</span><span class="47">47</span
              ><span class="51">51</span><span class="52">52</span>
            </li>
            <li>
              <span class="12">12</span><span class="15">15</span><span class="19">19</span><span class="23">23</span
              ><span class="31">31</span><span class="43">43</span>
            </li>
            <li>
              <span class="17">17</span><span class="24">24</span><span class="35">35</span><span class="48">48</span
              ><span class="56">56</span><span class="57">57</span>
            </li>
            <li>
              <span class="05">05</span><span class="10">10</span><span class="46">46</span><span class="48">48</span
              ><span class="57">57</span><span class="59">59</span>
            </li>
          </ul>
        </div>

        <div class="jogador">
          <p>Vilar:</p>
          <ul>
            <li>
              <span class="07">07</span><span class="09">09</span><span class="13">13</span><span class="24">24</span
              ><span class="26">26</span><span class="32">32</span>
            </li>
            <li>
              <span class="06">06</span><span class="10">10</span><span class="38">38</span><span class="39">39</span
              ><span class="41">41</span><span class="52">52</span>
            </li>
            <li>
              <span class="24">24</span><span class="26">26</span><span class="32">32</span><span class="42">42</span
              ><span class="46">46</span><span class="54">54</span>
            </li>
            <li>
              <span class="09">09</span><span class="14">14</span><span class="34">34</span><span class="37">37</span
              ><span class="49">49</span><span class="46">46</span>
            </li>
          </ul>
        </div>

        <div class="jogador">
          <p>Luis:</p>
          <ul>
            <li>
              <span class="02">02</span><span class="08">08</span><span class="18">18</span><span class="22">22</span
              ><span class="35">35</span><span class="37">37</span>
            </li>
            <li>
              <span class="16">16</span><span class="04">04</span><span class="48">48</span><span class="23">23</span
              ><span class="55">55</span><span class="58">58</span>
            </li>
            <li>
              <span class="09">09</span><span class="48">48</span><span class="33">33</span><span class="08">08</span
              ><span class="19">19</span><span class="41">41</span>
            </li>
            <li>
              <span class="08">08</span><span class="41">41</span><span class="16">16</span><span class="28">28</span
              ><span class="19">19</span><span class="48">48</span>
            </li>
          </ul>
        </div>

        <div class="jogador">
          <p>Luan:</p>
          <ul>
            <li>
              <span class="25">25</span><span class="33">33</span><span class="07">07</span><span class="11">11</span
              ><span class="45">45</span><span class="50">50</span>
            </li>
            <li>
              <span class="18">18</span><span class="49">49</span><span class="31">31</span><span class="24">24</span
              ><span class="08">08</span><span class="57">57</span>
            </li>
            <li>
              <span class="08">08</span><span class="23">23</span><span class="37">37</span><span class="40">40</span
              ><span class="60">60</span><span class="13">13</span>
            </li>
            <li>
              <span class="15">15</span><span class="54">54</span><span class="33">33</span><span class="28">28</span
              ><span class="20">20</span><span class="01">01</span>
            </li>
          </ul>
        </div>

        <div class="jogador">
          <p>Leo:</p>
          <ul>
            <li>
              <span class="05">05</span><span class="17">17</span><span class="26">26</span><span class="39">39</span
              ><span class="46">46</span><span class="53">53</span>
            </li>
            <li>
              <span class="15">15</span><span class="19">19</span><span class="24">24</span><span class="31">31</span
              ><span class="44">44</span><span class="51">51</span>
            </li>
            <li>
              <span class="09">09</span><span class="17">17</span><span class="22">22</span><span class="44">44</span
              ><span class="49">49</span><span class="56">56</span>
            </li>
            <li>
              <span class="02">02</span><span class="39">39</span><span class="10">10</span><span class="27">27</span
              ><span class="50">50</span><span class="19">19</span>
            </li>
          </ul>
        </div>

        <div class="jogador">
          <p>Italo:</p>
          <ul>
            <li>
              <span class="05">05</span><span class="06">06</span><span class="19">19</span><span class="26">26</span
              ><span class="30">30</span><span class="35">35</span>
            </li>
            <li>
              <span class="14">14</span><span class="30">30</span><span class="44">44</span><span class="46">46</span
              ><span class="49">49</span><span class="50">50</span>
            </li>
            <li>
              <span class="08">08</span><span class="14">14</span><span class="19">19</span><span class="26">26</span
              ><span class="43">43</span><span class="49">49</span>
            </li>
            <li>
              <span class="11">11</span><span class="14">14</span><span class="28">28</span><span class="30">30</span
              ><span class="50">50</span><span class="59">59</span>
            </li>
          </ul>
        </div>
        <div class="jogador">
          <p>welg24:</p>
          <ul>
            <li>
              <span class="??">??</span><span class="??">??</span><span class="??">??</span><span class="??">??</span
              ><span class="??">??</span><span class="??">??</span>
            </li>
            <li>
              <span class="??">??</span><span class="??">??</span><span class="??">??</span><span class="??">??</span
              ><span class="??">??</span><span class="??">??</span>
            </li>
            <li>
              <span class="??">??</span><span class="??">??</span><span class="??">??</span><span class="??">??</span
              ><span class="??">??</span><span class="??">??</span>
            </li>
            <li>
              <span class="??">??</span><span class="??">??</span><span class="??">??</span><span class="??">??</span
              ><span class="??">??</span><span class="??">??</span>
            </li>
          </ul>
        </div>
      </div>
    </main>
    <!-- Modal -->
    <div id="myModal">
      <p>Parabéns, <span id="ganhador"></span>! Você é o ganhador!</p>
      <button onclick="fecharModal()">Fechar</button>
    </div>

    <!-- Fundo escuro do modal -->
    <div class="modal-overlay" id="modalOverlay"></div>
  </body>
  <script>
    const textoDoGanhador = document.getElementById("ganhador");
    const pintar = (number) => {
      const elements = document.getElementsByClassName(number);
      Object.values(elements).forEach((element) => {
        element.classList.add("selected");
      });
    };

    const contarPintados = (element) => {
      const counter = Object.values(element.children).reduce((acc, cur) => {
        // span
        return acc + (cur.classList.contains("selected") ? 1 : 0);
      }, 0);
      return counter;
    };

    const moverParaCima = (elemento) => {
      const lista = elemento.parentNode;
      const index = Array.prototype.indexOf.call(lista.children, elemento);

      if (index > 0) {
        lista.insertBefore(elemento, lista.children[index - 1]);
      }
    };

    const processar = () => {
      // desseleciona todos
      Object.values(document.getElementsByClassName("selected")).forEach((element) => {
        element.classList.remove("selected");
      });

      // busca valores digitados nos inputs
      const values = [
        document.getElementById("bola1")?.value,
        document.getElementById("bola2")?.value,
        document.getElementById("bola3")?.value,
        document.getElementById("bola4")?.value,
        document.getElementById("bola5")?.value,
        document.getElementById("bola6")?.value,
      ];

      // pinta todas as bolas que tenham o valor de algum input
      values.forEach((value) => pintar(value?.padStart(2, "0")));

      // ordena o jogo que tem mais numeros selecionados
      Object.values(document.getElementsByTagName("ul")).forEach((element) => {
        for (let i = 0; i < 3; i++) {
          if (contarPintados(Object.values(element.children)[i]) === 6) {
            const nomeDoGanhador = element.parentNode.querySelector("p").innerText.replace(/[.,\/#!$%\^&\*;:{}=\-_`~()]/g, "");
            textoDoGanhador.innerHTML = nomeDoGanhador
            mostrarModal();
            console.log("nomeDoGanhador", nomeDoGanhador);
          }
          if (contarPintados(Object.values(element.children)[i + 1]) > contarPintados(Object.values(element.children)[i])) {
            moverParaCima(Object.values(element.children)[i + 1]);
          }
        }
      });
    };
    const mostrarModal = () => {
      document.getElementById("myModal").style.display = "block";
      document.getElementById("modalOverlay").style.display = "block";
    };
    const fecharModal = () => {
      document.getElementById("myModal").style.display = "none";
      document.getElementById("modalOverlay").style.display = "none";
    };
  </script>
</html>
